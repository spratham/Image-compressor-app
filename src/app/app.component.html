<div class="upload-container">
  <h1>Image Compressor (40% of the actual size)</h1>

  <!-- File Upload -->
  <div class="upload-box" (click)="fileInput.click()">
    <input
      #fileInput
      type="file"
      accept="image/*"
      (change)="onFileChange($event)"
      hidden
    />
    <div *ngIf="!selectedFile; else fileSelected">
      <mat-icon>cloud_upload</mat-icon>
      <p>Click to upload an image (max 6MB)</p>
    </div>
    <ng-template #fileSelected>
      <p><strong>{{ selectedFile.name }}</strong></p>
      <p>Original size: {{ originalSize }}</p>
    </ng-template>
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>

  <!-- Compress Button -->
  <button
    *ngIf="selectedFile && !compressedFile"
    mat-raised-button
    color="primary"
    (click)="compressImage()"
    [disabled]="isLoading"
  >
    {{ isLoading ? 'Compressing...' : 'Compress Image' }}
  </button>

  <!-- Results -->
  <div *ngIf="compressedFile" class="result-box">
    <h3>Compressed Image ({{ compressedSize }})</h3>
    <img [src]="compressedFile | safeUrl" alt="Compressed preview" />
    <button
      mat-raised-button
      color="accent"
      (click)="downloadCompressedImage()"
    >
      Download Compressed Image
    </button>
  </div>
</div>
